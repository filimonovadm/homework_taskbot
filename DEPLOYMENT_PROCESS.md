# Мой процесс разработки и развертывания

Этот документ описывает мой процесс разработки, тестирования и развертывания Telegram-бота.

## Общая схема

Мой основной рабочий процесс построен на быстрой итерации с развертыванием напрямую в продакшн для тестирования. Откат на предыдущую версию я осуществляю через повторный запуск успешных CI/CD пайплайнов в GitHub Actions.

## 1. Локальная разработка и тестирование

Я не использую локальные эмуляторы Firebase. Вместо этого, я провожу тестирование путем прямого развертывания локальных изменений в продакшн.

**Мои шаги:**

1.  **Я вношу изменения** в код в директории `functions/`.
2.  **Я разворачиваю функции** для тестирования в продакшн с помощью команды:
    ```bash
    firebase deploy --only functions
    ```
3.  **Я тестирую** функционал непосредственно в Telegram-боте.

## 2. Развертывание в продакшн (CI/CD)

Основное развертывание у меня происходит автоматически при слиянии изменений в ветку `master`.

-   **Триггер**: `push` в ветку `master`.
-   **Процесс**: GitHub Action, определенный в файле `.github/workflows/firebase-deploy.yml`, автоматически выполняет сборку и развертывание функции `webhook` в Firebase.
-   **Секреты**: В процессе развертывания используется `TELEGRAM_BOT_TOKEN`, который хранится в секретах моего репозитория GitHub.

## 3. Процесс отката

Если развернутая версия работает некорректно, я осуществляю откат следующим образом:

1.  Я перехожу в раздел **Actions** моего репозитория на GitHub.
2.  Я нахожу в списке воркфлоу **"Deploy to Firebase Functions"**.
3.  Я выбираю из истории предыдущий успешный запуск, который соответствует стабильной версии, на которую я хочу откатиться.
4.  Я использую опцию **"Re-run all jobs"** для этого запуска, чтобы повторно развернуть старую версию кода.
